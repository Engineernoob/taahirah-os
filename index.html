<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Taahirah-OS · Portfolio Desktop</title>

    <!-- Local vendor styles -->
    <link rel="stylesheet" href="vendor/98.css" />
    <link rel="stylesheet" href="vendor/os-gui-layout.css" />
    <link rel="stylesheet" href="vendor/os-gui-windows-98.css" />
    <link rel="stylesheet" href="vendor/os-gui-windows-default.css" />

    <!-- Custom styles -->
    <link rel="stylesheet" href="style.css" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="icons/win-98-logo.png" type="image/png" />
  </head>

  <body>
    <!-- Desktop -->
    <main id="desktop" role="main" aria-label="Desktop environment">
      <div class="desktop-icon" data-window="about" title="About Me">
        <img src="icons/about-me.png" alt="About Icon" />
        <span>About Me</span>
      </div>

      <div class="desktop-icon" data-window="projects" title="Projects">
        <img src="icons/projects.png" alt="Projects Icon" />
        <span>Projects</span>
      </div>

      <div class="desktop-icon" data-window="case-study" title="Case Study">
        <img src="icons/win-98-logo.png" alt="Case Study Icon" />
        <span>Case Study</span>
      </div>

      <div class="desktop-icon" data-window="contact" title="Contact">
        <img src="icons/contact.png" alt="Contact Icon" />
        <span>Contact</span>
      </div>

      <div class="desktop-icon" data-window="skills-radar" title="Skills Radar">
        <img src="icons/computer-icon.png" alt="Skills Radar Icon" />
        <span>Skills Radar</span>
      </div>

      <div
        class="desktop-icon pinball-icon"
        id="pinball-desktop-icon"
        data-window="pinball"
        title="Pinball Game"
      >
        <img src="icons/game.png" alt="Pinball Game Icon" />
        <span>Pinball Game</span>
      </div>

      <!-- Ada (AI Assistant) Icon -->
      <div
        class="desktop-icon"
        id="ada-icon"
        data-window="ada"
        title="Ada — Your AI Assistant"
      >
        <img src="icons/ada-icon.png" alt="Ada AI Icon" />
        <span>Ada</span>
      </div>
    </main>

    <!-- Taskbar -->
    <footer id="taskbar" role="contentinfo" aria-label="Taskbar">
      <!-- Start Icon Only -->
      <img
        id="start-icon"
        src="icons/start-button.png"
        alt="Start Menu"
        title="Open Start Menu"
        style="
          height: 36px;
          width: auto;
          margin-left: 6px;
          cursor: pointer;
          image-rendering: pixelated;
        "
        aria-haspopup="true"
        aria-expanded="false"
      />

      <div id="taskbar-buttons" role="tablist" aria-label="Open windows"></div>
      <div class="taskbar-space"></div>
      <div class="taskbar-clock" id="clock" aria-live="polite"></div>
    </footer>

    <!-- Start Menu -->
    <nav
      id="start-menu"
      class="window start-menu"
      hidden
      aria-label="Start Menu"
    >
      <div class="title-bar">
        <div class="title-bar-text">Start Menu</div>
      </div>
      <div class="window-body">
        <ul class="start-menu-list">
          <li>
            <button data-window="about">
              <img src="icons/about-me.png" alt="" /> About
            </button>
          </li>
          <li>
            <button data-window="projects">
              <img src="icons/projects.png" alt="" /> Projects
            </button>
          </li>
          <li>
            <button data-window="case-study">
              <img src="icons/win-98-logo.png" alt="" /> Case Study
            </button>
          </li>
          <li>
            <button data-window="contact">
              <img src="icons/contact.png" alt="" /> Contact
            </button>
          </li>
          <li>
            <button data-window="skills-radar">
              <img src="icons/skills.png" alt="" /> Skills Radar
            </button>
          </li>
          <li>
            <button data-window="pinball">
              <img src="icons/game.png" alt="" /> Pinball Game
            </button>
          </li>
          <li>
            <button data-window="ada">
              <img src="icons/ada-icon.png" alt="" /> Ada Assistant
            </button>
          </li>
          <hr />
          <li>
            <button data-action="shutdown">
              <img src="icons/shutdown.png" alt="" /> Shut Down
            </button>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Scripts -->
    <script src="script.js"></script>

    <!-- Boot + Ada Hooks -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Only trigger boot if system isn't already booted or coming from shutdown
        if (!sessionStorage.getItem("booted") && !sessionStorage.getItem("restarting")) {
          sessionStorage.setItem("booted", "true");
          window.location.replace("boot.html");
        }


        // --- Ada AI Assistant setup
        const adaIcon = document.getElementById("ada-icon");
        if (adaIcon) {
          adaIcon.addEventListener("click", () => {
            // Open Ada window
            openWindow("ada");

            // Play Ada boot tone (only once per session)
            if (!sessionStorage.getItem("adaPlayed")) {
              const audio = new Audio("sounds/ada-boot.mp3");
              audio.volume = 0.7;
              audio.play().catch(() => {});
              sessionStorage.setItem("adaPlayed", "true");
            }
          });
        }

        // --- Shutdown handling
        const shutdownLink = document.querySelector("[data-action='shutdown']");
        if (shutdownLink) {
          shutdownLink.addEventListener("click", (e) => {
            e.preventDefault();
            playShutdownAndExit();
          });
        }
      });

      // --- Shutdown sound & redirect
      function playShutdownAndExit() {
        const shutdownAudio = new Audio("sounds/winxpshutdown.mp3");
        shutdownAudio.volume = 0.6;

        // Wait for sound before redirecting
        shutdownAudio.play().catch(() => {
          window.location.href = "shutdown.html";
        });

        shutdownAudio.addEventListener("ended", () => {
          window.location.href = "shutdown.html";
        });
      }

      // --- Fallback before tab close (for non-click exits)
      window.addEventListener("beforeunload", (e) => {
        const shutdownAudio = new Audio("sounds/winxpshutdown.mp3");
        shutdownAudio.volume = 0.4;
        shutdownAudio.play().catch(() => {});
      });
    </script>

    </script>
  </body>
</html>
