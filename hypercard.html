<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HyperCard</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .hypercard-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: var(--mac-desktop);
            background-image: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 2px,
                    rgba(255, 255, 255, 0.1) 2px,
                    rgba(255, 255, 255, 0.1) 4px
                );
            background-size: 8px 8px;
        }

        .hypercard-toolbar {
            background: var(--mac-button-face);
            border-bottom: 1px solid var(--mac-border-dark);
            padding: 6px;
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }

        .tool-group {
            display: flex;
            gap: 2px;
            padding: 0 8px;
            border-right: 1px solid var(--mac-border);
            align-items: center;
        }

        .tool-group:last-child {
            border-right: none;
        }

        .tool-button {
            background: var(--mac-button-face);
            border: 1px solid var(--mac-border);
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: all 0.2s ease;
            min-width: 24px;
            justify-content: center;
            font-family: "SF Pro Display", "Helvetica Neue", Arial, sans-serif;
        }

        .tool-button:hover {
            background: var(--mac-titlebar);
            border-color: var(--mac-selected);
        }

        .tool-button.active {
            background: var(--mac-selected);
            color: white;
            border-color: var(--mac-selected);
        }

        .hypercard-main {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .card-stack {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
        }

        .card {
            width: 480px;
            height: 320px;
            background: white;
            border: 2px solid var(--mac-border-dark);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 20px;
            position: relative;
            font-family: "SF Pro Display", "Helvetica Neue", Arial, sans-serif;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
        }

        .card-header {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--mac-border);
        }

        .card-content {
            min-height: 200px;
            line-height: 1.6;
            color: #333;
            overflow-y: auto;
        }

        .card-button {
            display: inline-block;
            background: var(--mac-button-face);
            border: 2px outset var(--mac-button-light);
            border-radius: 6px;
            padding: 8px 16px;
            margin: 10px 10px 0 0;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.1s ease;
            text-decoration: none;
            color: var(--mac-text);
        }

        .card-button:hover {
            background: var(--mac-titlebar);
        }

        .card-button:active {
            border: 2px inset var(--mac-button-dark);
            transform: scale(0.98);
        }

        .card-navigation {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 8px;
        }

        .nav-button {
            width: 40px;
            height: 30px;
            background: var(--mac-button-face);
            border: 2px outset var(--mac-button-light);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.1s ease;
        }

        .nav-button:hover {
            background: var(--mac-titlebar);
        }

        .nav-button:active {
            border: 2px inset var(--mac-button-dark);
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .navigation-sidebar {
            width: 200px;
            background: #f0f0f0;
            border-left: 1px solid var(--mac-border-dark);
            padding: 15px;
            overflow-y: auto;
        }

        .stack-header {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--mac-border);
        }

        .card-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .card-list-item {
            padding: 8px 12px;
            margin-bottom: 4px;
            background: white;
            border: 1px solid var(--mac-border);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 12px;
        }

        .card-list-item:hover {
            background: var(--mac-titlebar);
        }

        .card-list-item.active {
            background: var(--mac-selected);
            color: white;
            border-color: var(--mac-selected);
        }

        .search-box {
            width: 100%;
            padding: 6px;
            border: 1px solid var(--mac-border);
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 12px;
        }

        .field-button {
            display: inline-block;
            background: #e0e0e0;
            border: 1px solid #999;
            border-radius: 4px;
            padding: 2px 6px;
            margin: 2px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .field-button:hover {
            background: #d0d0d0;
            border-color: #666;
        }

        .status-bar {
            background: var(--mac-button-face);
            border-top: 1px solid var(--mac-border-dark);
            padding: 4px 12px;
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--mac-text);
        }

        .script-editor {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .script-editor.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .script-window {
            width: 600px;
            height: 400px;
            background: white;
            border: 2px solid var(--mac-border-dark);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
        }

        .script-header {
            background: var(--mac-titlebar);
            padding: 8px;
            font-weight: bold;
            border-bottom: 1px solid var(--mac-border-dark);
        }

        .script-textarea {
            flex: 1;
            padding: 10px;
            border: none;
            font-family: "Monaco", monospace;
            font-size: 12px;
            resize: none;
            outline: none;
        }

        .script-controls {
            padding: 8px;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }

        .animation-effect {
            animation: cardFlip 0.6s ease;
        }

        @keyframes cardFlip {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(90deg); }
            100% { transform: rotateY(0deg); }
        }

        .field-highlight {
            background: yellow;
            padding: 2px 4px;
            border-radius: 2px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .field-highlight:hover {
            background: #ffd700;
        }

        .dialog-box {
            background: white;
            border: 2px solid var(--mac-border-dark);
            border-radius: 8px;
            padding: 20px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2000;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            display: none;
        }

        .dialog-box.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="hypercard-container">
        <div class="hypercard-toolbar">
            <div class="tool-group">
                <button class="tool-button" onclick="newCard()">New Card</button>
                <button class="tool-button" onclick="deleteCard()">Delete</button>
                <button class="tool-button" onclick="duplicateCard()">Duplicate</button>
            </div>
            
            <div class="tool-group">
                <button class="tool-button" onclick="addButton()">Add Button</button>
                <button class="tool-button" onclick="addTextField()">Add Field</button>
                <button class="tool-button" onclick="addImage()">Add Image</button>
            </div>
            
            <div class="tool-group">
                <button class="tool-button" onclick="browseMode()" id="browseBtn">Browse</button>
                <button class="tool-button" onclick="editMode()" id="editBtn">Edit</button>
                <button class="tool-button" onclick="scriptMode()" id="scriptBtn">Script</button>
            </div>
            
            <div class="tool-group">
                <button class="tool-button" onclick="findCard()">Find</button>
                <button class="tool-button" onclick="sortCards()">Sort</button>
                <button class="tool-button" onclick="-saveStack()">Save</button>
                <button class="tool-button" onclick="loadStack()">Load</button>
            </div>
        </div>

        <div class="hypercard-main">
            <div class="card-stack">
                <div class="card" id="currentCard">
                    <div class="card-header" id="cardTitle">Welcome to HyperCard</div>
                    <div class="card-content" id="cardContent">
                        <p>Welcome to the Macintosh HyperCard experience!</p>
                        <p>This is a recreated version of the legendary HyperCard system that empowered millions to create interactive projects.</p>
                        <p><strong>Features:</strong></p>
                        <ul>
                            <li>Interactive cards and buttons</li>
                            <li>Simple scripting language</li>
                            <li>Navigation between cards</li>
                            <li>Database-like functionality</li>
                        </ul>
                        <p>Click the buttons below to navigate to other cards or try the Edit mode to create your own content!</p>
                        <button class="card-button" onclick="goToCard(1)">Getting Started</button>
                        <button class="card-button" onclick="goToCard(2)">Tutorial</button>
                        <button class="card-button" onclick="goToCard(3)">Examples</button>
                    </div>
                    <div class="card-navigation">
                        <button class="nav-button" onclick="previousCard()" id="prevBtn" disabled>←</button>
                        <button class="nav-button" onclick="goHome()">⟲</button>
                        <button class="nav-button" onclick="nextCard()" id="nextBtn">→</button>
                    </div>
                </div>
            </div>

            <div class="navigation-sidebar">
                <div class="stack-header">Card Stack: "Tutorial"</div>
                <input type="text" class="search-box" placeholder="Search cards..." onkeyup="searchCards(this.value)">
                <ul class="card-list" id="cardList">
                    <!-- Card list will be populated dynamically -->
                </ul>
            </div>
        </div>

        <div class="status-bar">
            <span id="statusText">Card 1 of 4 | Browse Mode</span>
            <span id="modificationDate">Last Modified: Just now</span>
        </div>
    </div>

    <div class="script-editor" id="scriptEditor">
        <div class="script-window">
            <div class="script-header">Script Editor - Card <span id="scriptCardNumber">1</span></div>
            <textarea class="script-textarea" id="scriptTextarea" placeholder="on openCard
  put \"Hello World\" into cardTitle
end openCard

on mouseUp
  go to next card
end mouseUp"></textarea>
            <div class="script-controls">
                <button class="card-button" onclick="testScript()">Test</button>
                <button class="card-button" onclick="compileScript()">Compile</button>
                <button class="card-button" onclick="closeScriptEditor()">Close</button>
            </div>
        </div>
    </div>

    <div class="dialog-box" id="dialogBox">
        <div id="dialogContent"></div>
        <button class="card-button" onclick="closeDialog()">OK</button>
    </div>

    <script>
        class HyperCard {
            constructor() {
                this.cards = [];
                this.currentCardIndex = 0;
                this.mode = 'browse'; // browse, edit, script
                this.stackName = 'Tutorial';
                this.modified = false;
                
                this.initCards();
                this.init();
            }

            init() {
                this.updateCardList();
                this.displayCard(this.currentCardIndex);
                this.updateNavigationButtons();
                this.updateStatus();
                this.setupKeyboardShortcuts();
            }

            initCards() {
                // Create default cards
                this.cards = [
                    {
                        id: 1,
                        title: 'Welcome to HyperCard',
                        content: `
                            <p>Welcome to the Macintosh HyperCard experience!</p>
                            <p>This is a recreated version of the legendary HyperCard system that empowered millions to create interactive projects.</p>
                            <p><strong>Features:</strong></p>
                            <ul>
                                <li>Interactive cards and buttons</li>
                                <li>Simple scripting language</li>
                                <li>Navigation between cards</li>
                                <li>Database-like functionality</li>
                            </ul>
                            <p>Click the buttons below to navigate to other cards or try the Edit mode to create your own content!</p>
                            <button class="card-button" onclick="hypercard.goToCard(1)">Getting Started</button>
                            <button class="card-button" onclick="hypercard.goToCard(2)">Tutorial</button>
                            <button class="card-button" onclick="hypercard.goToCard(3)">Examples</button>
                        `,
                        script: `on openCard
  put "Welcome to HyperCard" into cardTitle
end openCard

on goToCard cardNum
  go to card cardNum
end goToCard`
                    },
                    {
                        id: 2,
                        title: 'Getting Started',
                        content: `
                            <h2>Getting Started with HyperCard</h2>
                            <p>HyperCard consists of <strong>cards</strong> organized in <strong>stacks</strong>. Each card can contain:</p>
                            <ul>
                                <li>Text and graphics</li>
                                <li>Interactive buttons</li>
                                <li>Input fields</li>
                                <li>Scripts that control behavior</li>
                            </ul>
                            <p><strong>Navigation:</strong></p>
                            <p>Use the arrow buttons to navigate between cards, or click on the card names in the sidebar.</p>
                            <p><strong>Modes:</strong></p>
                            <ul>
                                <li><strong>Browse:</strong> Navigate and interact with cards</li>
                                <li><strong>Edit:</strong> Modify card content and layout</li>
                                <li><strong>Script:</strong> Write and edit scripts</li>
                            </ul>
                            <button class="card-button" onclick="hypercard.goToCard(0)">← Previous</button>
                            <button class="card-button" onclick="hypercard.goToCard(2)">Next →</button>
                        `,
                        script: `on openCard
  put "Getting Started" into cardTitle
  put card 1 to 3 into navigationButtons
end openCard`
                    },
                    {
                        id: 3,
                        title: 'Tutorial',
                        content: `
                            <h2>HyperCard Tutorial</h2>
                            <p><strong>Creating Your First Button:</strong></p>
                            <ol>
                                <li>Switch to Edit mode using the toolbar</li>
                                <li>Click "Add Button" to create a new button</li>
                                <li>Double-click the button to edit its script</li>
                                <li>Switch back to Browse mode to test</li>
                            </ol>
                            <p><strong>Basic Scripting:</strong></p>
                            <p>HyperCard uses a simple English-like scripting language. Here are some basics:</p>
                            <ul>
                                <li><code>go to card 3</code> - Navigate to card 3</li>
                                <li><code>put "Hello" into field 1</code> - Put text in field</li>
                                <li><code>answer "Would you like to continue?"</code> - Show dialog</li>
                                <li><code>go next</code> - Go to next card</li>
                            </ul>
                            <button class="card-button" onclick="hypercard.testScript()">Test Script</button>
                            <button class="card-button" onclick="hypercard.goToCard(1)">← Back</button>
                            <button class="card-button" onclick="hypercard.goToCard(3)">Next →</button>
                        `,
                        script: `on openCard
  put "Tutorial" into cardTitle
  enable button "Test Script"
end openCard

on testScript
  answer "Script testing feature coming soon!"
end testScript`
                    },
                    {
                        id: 4,
                        title: 'Examples',
                        content: `
                            <h2>HyperCard Examples</h2>
                            <p>Here are some example applications you can create:</p>
                            
                            <p><strong>Address Book:</strong></p>
                            <p>Create cards for contacts with fields for name, phone, and address. Use scripts to search and organize.</p>
                            <button class="card-button" onclick="hypercard.showExample('address')">Create Address Book</button>
                            
                            <p><strong>Quiz Game:</strong></p>
                            <p>Make interactive quizzes with score tracking and different difficulty levels.</p>
                            <button class="card-button" onclick="hypercard.showExample('quiz')">Create Quiz</button>
                            
                            <p><strong>Recipe Collection:</strong></p>
                            <p>Organize recipes with ingredients, instructions, and categories.</p>
                            <button class="card-button" onclick="hypercard.showExample('recipe')">Recipe Collection</button>
                            
                            <p><strong>Database:</strong></p>
                            <p>Build custom databases with forms, reports, and search capabilities.</p>
                            <button class="card-button" onclick="hypercard.showExample('database')">Database Creator</button>
                        `,
                        script: `on openCard
  put "Examples" into cardTitle
end openCard

on showExample type
  answer type & " example coming soon!"
end showExample`
                    }
                ];
            }

            displayCard(index) {
                const card = this.cards[index];
                if (!card) return;

                const cardElement = document.getElementById('currentCard');
                const titleElement = document.getElementById('cardTitle');
                const contentElement = document.getElementById('cardContent');
                
                // Add animation
                cardElement.classList.add('animation-effect');
                
                titleElement.textContent = card.title;
                contentElement.innerHTML = card.content;
                
                // Re-attach event listeners to new buttons
                setTimeout(() => {
                    this.attachButtonListeners();
                }, 100);
                
                setTimeout(() => {
                    cardElement.classList.remove('animation-effect');
                }, 600);
                
                this.currentCardIndex = index;
                this.updateCardList();
                this.updateNavigationButtons();
                this.updateStatus();
            }

            attachButtonListeners() {
                const buttons = document.querySelectorAll('.card-button');
                buttons.forEach(button => {
                    const onclick = button.getAttribute('onclick');
                    if (onclick) {
                        button.onclick = () => {
                            try {
                                eval(onclick);
                            } catch (e) {
                                console.log('Button action:', onclick);
                            }
                        };
                    }
                });
            }

            goToCard(index) {
                if (index >= 0 && index < this.cards.length) {
                    this.displayCard(index);
                    this.modified = true;
                }
            }

            previousCard() {
                if (this.currentCardIndex > 0) {
                    this.goToCard(this.currentCardIndex - 1);
                }
            }

            nextCard() {
                if (this.currentCardIndex < this.cards.length - 1) {
                    this.goToCard(this.currentCardIndex + 1);
                }
            }

            goHome() {
                this.goToCard(0);
            }

            newCard() {
                const newCard = {
                    id: Date.now(),
                    title: `Card ${this.cards.length + 1}`,
                    content: '<p>New card content here. Click Edit mode to add content.</p>',
                    script: 'on openCard\n  put "New Card" into cardTitle\nend openCard'
                };
                
                this.cards.push(newCard);
                this.goToCard(this.cards.length - 1);
                this.modified = true;
            }

            deleteCard() {
                if (this.cards.length > 1) {
                    if (confirm('Are you sure you want to delete this card?')) {
                        this.cards.splice(this.currentCardIndex, 1);
                        const newIndex = Math.min(this.currentCardIndex, this.cards.length - 1);
                        this.goToCard(newIndex);
                        this.modified = true;
                    }
                } else {
                    alert('Cannot delete the last card in the stack.');
                }
            }

            duplicateCard() {
                const currentCard = this.cards[this.currentCardIndex];
                const duplicated = {
                    ...currentCard,
                    id: Date.now(),
                    title: currentCard.title + ' (Copy)'
                };
                
                this.cards.splice(this.currentCardIndex + 1, 0, duplicated);
                this.goToCard(this.currentCardIndex + 1);
                this.modified = true;
            }

            addButton() {
                const buttonHtml = '<button class="card-button">New Button</button>';
                const currentCard = this.cards[this.currentCardIndex];
                currentCard.content += buttonHtml;
                this.displayCard(this.currentCardIndex);
                this.modified = true;
            }

            addTextField() {
                const fieldHtml = '<p><span class="field-highlight">[Field]</span></p>';
                const currentCard = this.cards[this.currentCardIndex];
                currentCard.content += fieldHtml;
                this.displayCard(this.currentCardIndex);
                this.modified = true;
            }

            addImage() {
                const imageHtml = '<p><em>[Image placeholder]</em></p>';
                const currentCard = this.cards[this.currentCardIndex];
                currentCard.content += imageHtml;
                this.displayCard(this.currentCardIndex);
                this.modified = true;
            }

            setMode(mode) {
                this.mode = mode;
                
                // Update button states
                document.querySelectorAll('.tool-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                if (mode === 'browse') {
                    document.getElementById('browseBtn').classList.add('active');
                } else if (mode === 'edit') {
                    document.getElementById('editBtn').classList.add('active');
                } else if (mode === 'script') {
                    document.getElementById('scriptBtn').classList.add('active');
                    this.openScriptEditor();
                }
                
                this.updateStatus();
            }

            openScriptEditor() {
                const editor = document.getElementById('scriptEditor');
                const textarea = document.getElementById('scriptTextarea');
                const cardNum = document.getElementById('scriptCardNumber');
                
                const currentCard = this.cards[this.currentCardIndex];
                textarea.value = currentCard.script || '';
                cardNum.textContent = currentCard.id;
                
                editor.classList.add('active');
            }

            closeScriptEditor() {
                const editor = document.getElementById('scriptEditor');
                editor.classList.remove('active');
                this.setMode('browse');
            }

            compileScript() {
                const script = document.getElementById('scriptTextarea').value;
                const currentCard = this.cards[this.currentCardIndex];
                currentCard.script = script;
                this.modified = true;
                
                alert('Script compiled successfully!');
            }

            testScript() {
                // Simple script testing
                alert('Script execution coming soon!');
            }

            findCard() {
                const searchTerm = prompt('Search for:');
                if (searchTerm) {
                    const index = this.cards.findIndex(card => 
                        card.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        card.content.toLowerCase().includes(searchTerm.toLowerCase())
                    );
                    
                    if (index !== -1) {
                        this.goToCard(index);
                    } else {
                        alert('No cards found matching: ' + searchTerm);
                    }
                }
            }

            searchCards(query) {
                const cardList = document.getElementById('cardList');
                const items = cardList.getElementsByTagName('li');
                
                for (let item of items) {
                    const text = item.textContent.toLowerCase();
                    if (text.includes(query.toLowerCase())) {
                        item.style.display = '';
                    } else {
                        item.style.display = 'none';
                    }
                }
            }

            updateCardList() {
                const cardList = document.getElementById('cardList');
                cardList.innerHTML = '';
                
                this.cards.forEach((card, index) => {
                    const li = document.createElement('li');
                    li.className = 'card-list-item';
                    if (index === this.currentCardIndex) {
                        li.classList.add('active');
                    }
                    li.textContent = `${card.title} (Card ${index + 1})`;
                    li.onclick = () => this.goToCard(index);
                    cardList.appendChild(li);
                });
            }

            updateNavigationButtons() {
                document.getElementById('prevBtn').disabled = this.currentCardIndex === 0;
                document.getElementById('nextBtn').disabled = this.currentCardIndex === this.cards.length - 1;
            }

            updateStatus() {
                const statusText = document.getElementById('statusText');
                const modeText = this.mode.charAt(0).toUpperCase() + this.mode.slice(1) + ' Mode';
                statusText.textContent = `Card ${this.currentCardIndex + 1} of ${this.cards.length} | ${modeText}`;
                
                const modDate = document.getElementById('modificationDate');
                const now = new Date().toLocaleTimeString();
                modDate.textContent = `Last Modified: ${now}`;
            }

            saveStack() {
                const stackData = {
                    name: this.stackName,
                    cards: this.cards,
                    currentCard: this.currentCardIndex
                };
                
                localStorage.setItem('hypercard_stack_' + this.stackName, JSON.stringify(stackData));
                alert('Stack saved successfully!');
                this.modified = false;
            }

            loadStack() {
                const stackName = prompt('Enter stack name to load:', this.stackName);
                if (stackName) {
                    const stackData = localStorage.getItem('hypercard_stack_' + stackName);
                    if (stackData) {
                        const stack = JSON.parse(stackData);
                        this.cards = stack.cards;
                        this.stackName = stack.name;
                        this.currentCardIndex = stack.currentCard || 0;
                        this.init();
                        alert('Stack loaded successfully!');
                    } else {
                        alert('Stack not found: ' + stackName);
                    }
                }
            }

            showExample(type) {
                const dialog = document.getElementById('dialogBox');
                const content = document.getElementById('dialogContent');
                
                const examples = {
                    address: `
                        <h3>Address Book Template</h3>
                        <p>Creates a card stack for managing contacts with fields for name, phone, and address.</p>
                        <p>Features: Search, sort, and export functionality.</p>
                    `,
                    quiz: `
                        <h3>Quiz Game Template</h3>
                        <p>Interactive quiz system with multiple choice questions and scoring.</p>
                        <p>Features: Timer, score tracking, and different difficulty levels.</p>
                    `,
                    recipe: `
                        <h3>Recipe Collection Template</h3>
                        <p>Organize recipes with ingredients, instructions, and categories.</p>
                        <p>Features: Search by ingredient, meal planning, and shopping lists.</p>
                    `,
                    database: `
                        <h3>Database Creator Template</h3>
                        <p>Custom database builder with forms, reports, and advanced queries.</p>
                        <p>Features: Data validation, charts, and export capabilities.</p>
                    `
                };
                
                content.innerHTML = examples[type] || '<p>Example not available.</p>';
                dialog.classList.add('active');
            }

            closeDialog() {
                document.getElementById('dialogBox').classList.remove('active');
            }

            setupKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        switch(e.key) {
                            case 'n':
                                e.preventDefault();
                                this.newCard();
                                break;
                            case 's':
                                e.preventDefault();
                                this.saveStack();
                                break;
                            case 'o':
                                e.preventDefault();
                                this.loadStack();
                                break;
                            case 'f':
                                e.preventDefault();
                                this.findCard();
                                break;
                        }
                    }
                    
                    // Navigation shortcuts
                    if (!e.ctrlKey && !e.metaKey && !e.altKey && !e.shiftKey) {
                        switch(e.key) {
                            case 'b':
                                this.setMode('browse');
                                break;
                            case 'e':
                                this.setMode('edit');
                                break;
                            case 's':
                                this.setMode('script');
                                break;
                            case 'ArrowLeft':
                                this.previousCard();
                                break;
                            case 'ArrowRight':
                                this.nextCard();
                                break;
                        }
                    }
                });
            }
        }

        // Global hypercard instance
        let hypercard;

        // Initialize hypercard when page loads
        document.addEventListener('DOMContentLoaded', () => {
            hypercard = new HyperCard();
        });

        // Global functions for button handlers
        function newCard() { hypercard.newCard(); }
        function deleteCard() { hypercard.deleteCard(); }
        function duplicateCard() { hypercard.duplicateCard(); }
        function addButton() { hypercard.addButton(); }
        function addTextField() { hypercard.addTextField(); }
        function addImage() { hypercard.addImage(); }
        
        function browseMode() { hypercard.setMode('browse'); }
        function editMode() { hypercard.setMode('edit'); }
        function scriptMode() { hypercard.setMode('script'); }
        
        function findCard() { hypercard.findCard(); }
        function sortCards() { alert('Sort feature coming soon!'); }
        function saveStack() { hypercard.saveStack(); }
        function loadStack() { hypercard.loadStack(); }
        
        function goToCard(index) { hypercard.goToCard(index); }
        function previousCard() { hypercard.previousCard(); }
        function nextCard() { hypercard.nextCard(); }
        function goHome() { hypercard.goHome(); }
        
        function searchCards(query) { hypercard.searchCards(query); }
        function testScript() { hypercard.testScript(); }
        function compileScript() { hypercard.compileScript(); }
        function closeScriptEditor() { hypercard.closeScriptEditor(); }
        function closeDialog() { hypercard.closeDialog(); }
    </script>
</body>
</html>
